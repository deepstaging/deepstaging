// <auto-generated/>
// SPDX-License-Identifier: RPL-1.5
// Copyright (c) Deepstaging contributors. All rights reserved.
// Licensed under the Reciprocal Public License 1.5 (RPL-1.5).
// See LICENSE file in the project root for full license information.
#nullable enable
using Deepstaging.Effects;
using Deepstaging.Effects.Runtime;
using LanguageExt;
using LanguageExt.Effects;
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Threading;
using System.Threading.Tasks;
using static LanguageExt.Prelude;

namespace TestApp;
public static partial class EmailEffects
{
    /// <summary>
    /// Service for sending emails
    /// </summary>
    public static partial class EmailService
    {
        private static readonly ActivitySource ActivitySource = new("TestApp.EmailService", "1.0.0");
        /// <summary>
        /// Sends an email
        /// </summary>
        /// <param name="to">The recipient email address</param>
        /// <param name="subject">The email subject</param>
        /// <param name="body">The email body</param>
        public static Eff<RT, Unit> SendAsync<RT>(string to, string subject, string body)
            where RT : IHasEmailService => liftEff<RT, Unit>(async rt =>
        {
            await rt.EmailService.SendAsync(to, subject, body);
            return unit;
        }).WithActivity("EmailService.SendAsync", ActivitySource);
        public static Eff<RT, bool> ValidateAsync<RT>(string email)
            where RT : IHasEmailService => liftEff<RT, bool>(async rt => await rt.EmailService.ValidateAsync(email)).WithActivity("EmailService.ValidateAsync", ActivitySource);
    }
}