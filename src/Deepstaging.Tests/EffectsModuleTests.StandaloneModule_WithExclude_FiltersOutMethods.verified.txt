// <auto-generated/>
#nullable enable
namespace TestApp;
public interface IHasEmail
{
    public global::TestApp.IEmailService EmailService { get; }
}

// <auto-generated/>
#nullable enable
using Deepstaging.Effects;
using System.Diagnostics;
using LanguageExt;
using LanguageExt.Effects;
using static LanguageExt.Prelude;

namespace TestApp;
public static partial class EmailEffects
{
    private static readonly ActivitySource ActivitySource = new("TestApp.EmailEffects", "1.0.0");

    /// <summary>
    /// Sends an email asynchronously.
    /// </summary>
    /// <param name="to"></param>
    /// <param name="body"></param>
    /// <returns></returns>
    public static Eff<RT, Unit> SendAsync<RT>(string to, string body)
        where RT : IHasEmail => liftEff<RT, Unit>(async rt =>
    {
        await rt.EmailService.SendAsync(to, body);
        return unit;
    }).WithActivity("Email.SendAsync", ActivitySource);

    /// <summary>
    /// Validates an email address asynchronously.
    /// </summary>
    /// <param name="email"></param>
    /// <returns></returns>
    public static Eff<RT, bool> ValidateAsync<RT>(string email)
        where RT : IHasEmail => liftEff<RT, bool>(async rt => await rt.EmailService.ValidateAsync(email)).WithActivity("Email.ValidateAsync", ActivitySource);
}