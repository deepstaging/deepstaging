// <auto-generated/>
// SPDX-License-Identifier: RPL-1.5
// Copyright (c) Deepstaging contributors. All rights reserved.
// Licensed under the Reciprocal Public License 1.5 (RPL-1.5).
// See LICENSE file in the project root for full license information.
#nullable enable
using Microsoft.Extensions.Configuration;
using Microsoft.Extensions.DependencyInjection;

namespace TestApp;
/// <summary>
/// Interface for the <c>SlackConfigProvider</c> configuration provider.
/// </summary>
public interface ISlackConfigProvider
{
    /// <summary>
    /// Gets the <see cref="SlackConfig"/> configuration.
    /// </summary>
    public global::TestApp.SlackConfig SlackConfig { get; }
}

public partial class SlackConfigProvider(global::Microsoft.Extensions.Configuration.IConfiguration configuration) : ISlackConfigProvider
{
    private readonly global::Microsoft.Extensions.Configuration.IConfigurationSection _section = configuration.GetSection("Slack");
    /// <summary>
    /// Gets the <see cref="SlackConfig"/> configuration.
    /// </summary>
    public global::TestApp.SlackConfig SlackConfig => _section.GetSection("SlackConfig").Get<global::TestApp.SlackConfig>()!;
}

public static class SlackConfigProviderExtensions
{
    /// <summary>
    /// Adds configuration sources for <see cref="SlackConfigProvider"/>.
    /// </summary>
    /// <param name="builder">The configuration builder.</param>
    /// <param name="settingsPath">Optional path to the settings file. Defaults to &lt;c&gt;deepstaging.settings.json&lt;/c&gt;.</param>
    /// <returns>The configuration builder for fluent chaining.</returns>
    public static global::Microsoft.Extensions.Configuration.IConfigurationBuilder ConfigureSlackConfigProviderSources(this global::Microsoft.Extensions.Configuration.IConfigurationBuilder builder, string? settingsPath = null)
    {
        builder.AddJsonFile(settingsPath ?? "deepstaging.settings.json", optional: true, reloadOnChange: true);
        return builder;
    }

    /// <summary>
    /// Registers <see cref="SlackConfigProvider"/> and <see cref="ISlackConfigProvider"/> with the service collection.
    /// </summary>
    /// <param name="services">The service collection.</param>
    /// <param name="configuration">The application configuration.</param>
    /// <returns>The service collection for fluent chaining.</returns>
    public static global::Microsoft.Extensions.DependencyInjection.IServiceCollection AddSlackConfigProvider(this global::Microsoft.Extensions.DependencyInjection.IServiceCollection services, global::Microsoft.Extensions.Configuration.IConfiguration configuration)
    {
        var provider = new SlackConfigProvider(configuration);
        services.AddSingleton<ISlackConfigProvider>(provider);
        return services;
    }
}