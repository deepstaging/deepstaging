// <auto-generated/>
// SPDX-License-Identifier: RPL-1.5
// Copyright (c) Deepstaging contributors. All rights reserved.
// Licensed under the Reciprocal Public License 1.5 (RPL-1.5).
// See LICENSE file in the project root for full license information.
#nullable enable
using Microsoft.Extensions.Configuration;
using Microsoft.Extensions.DependencyInjection;
using System;
using System.Collections.Generic;
using System.Threading;
using System.Threading.Tasks;

namespace TestApp;
/// <summary>
/// Interface for the <c>NotificationConfigProvider</c> configuration provider.
/// </summary>
public interface INotificationConfigProvider
{
    /// <summary>
    /// Gets the <see cref="NotificationSettings"/> configuration.
    /// </summary>
    public global::TestApp.NotificationSettings NotificationSettings { get; }
    /// <summary>
    /// Gets the <see cref="NotificationSecrets"/> configuration.
    /// </summary>
    public global::TestApp.NotificationSecrets NotificationSecrets { get; }
}

public partial class NotificationConfigProvider(global::Microsoft.Extensions.Configuration.IConfiguration configuration) : INotificationConfigProvider
{
    private readonly global::Microsoft.Extensions.Configuration.IConfigurationSection _section = configuration.GetSection("Notification");
    /// <summary>
    /// Gets the <see cref="NotificationSettings"/> configuration.
    /// </summary>
    public global::TestApp.NotificationSettings NotificationSettings => _section.GetSection("NotificationSettings").Get<global::TestApp.NotificationSettings>()!;
    /// <summary>
    /// Gets the <see cref="NotificationSecrets"/> configuration.
    /// </summary>
    public global::TestApp.NotificationSecrets NotificationSecrets => _section.GetSection("NotificationSecrets").Get<global::TestApp.NotificationSecrets>()!;
}

public static class NotificationConfigProviderExtensions
{
    /// <summary>
    /// Adds configuration sources for <see cref="NotificationConfigProvider"/>.
    /// </summary>
    /// <param name="builder">The configuration builder.</param>
    /// <param name="settingsPath">Optional path to the settings file. Defaults to &lt;c&gt;deepstaging.settings.json&lt;/c&gt;.</param>
    /// <returns>The configuration builder for fluent chaining.</returns>
    public static global::Microsoft.Extensions.Configuration.IConfigurationBuilder ConfigureNotificationConfigProviderSources(this global::Microsoft.Extensions.Configuration.IConfigurationBuilder builder, string? settingsPath = null)
    {
        builder.AddJsonFile(settingsPath ?? "deepstaging.settings.json", optional: true, reloadOnChange: true);
        builder.AddUserSecrets(typeof(NotificationConfigProvider).Assembly, optional: true);
        return builder;
    }

    /// <summary>
    /// Registers <see cref="NotificationConfigProvider"/> and <see cref="INotificationConfigProvider"/> with the service collection.
    /// </summary>
    /// <param name="services">The service collection.</param>
    /// <param name="configuration">The application configuration.</param>
    /// <returns>The service collection for fluent chaining.</returns>
    public static global::Microsoft.Extensions.DependencyInjection.IServiceCollection AddNotificationConfigProvider(this global::Microsoft.Extensions.DependencyInjection.IServiceCollection services, global::Microsoft.Extensions.Configuration.IConfiguration configuration)
    {
        var provider = new NotificationConfigProvider(configuration);
        services.AddSingleton<INotificationConfigProvider>(provider);
        return services;
    }
}