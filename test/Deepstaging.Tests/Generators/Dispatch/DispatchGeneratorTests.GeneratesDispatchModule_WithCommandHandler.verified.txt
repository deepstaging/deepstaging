// <auto-generated/>
// SPDX-License-Identifier: RPL-1.5
// Copyright (c) Deepstaging contributors. All rights reserved.
// Licensed under the Reciprocal Public License 1.5 (RPL-1.5).
// See LICENSE file in the project root for full license information.
#nullable enable
using LanguageExt;
using LanguageExt.Effects;
using System;
using System.Collections.Generic;
using System.Threading;
using System.Threading.Tasks;

namespace TestApp;
/// <summary>
/// Generated dispatch module with typed dispatch methods.
/// </summary>
public static partial class AppDispatch
{
    /// <summary>
    /// Dispatches a <see cref="CreateOrder"/> command to <see cref="OrderCommands.Handle"/>.
    /// </summary>
    public static Eff<global::TestApp.AppRuntime, global::TestApp.OrderCreated> Dispatch(global::TestApp.CreateOrder command) =>
        from result in global::TestApp.OrderCommands.Handle(command)from _ in liftEff<global::TestApp.AppRuntime, Unit>(async rt =>
        {
            if (rt is global::Deepstaging.Dispatch.IAutoCommittable c)
                await c.CommitAsync(default);
            return unit;
        })select result;
}